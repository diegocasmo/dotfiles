#!/bin/bash

function header() {
	echo "$(tput sgr 0 1)$(tput setaf 6)$1$(tput sgr0)"
}

# macOS
header "Updating macOS..."
sudo softwareupdate -i -a
echo

# git-friendly
header "Updating git-friendly..."
sudo bash < <( curl https://raw.githubusercontent.com/jamiew/git-friendly/master/install.sh)
echo

if [ -d ~/.0 ]; then
  header "Updating dotfiles..."
  pushd ~/.0
  git pull
	python sync.py
	source "$HOME/.zshrc"
  popd
  echo
fi

if [ -f /usr/local/bin/npm ]; then
  header "Updating npm..."
	sudo npm install -g npm@latest
	sudo npm update -g
  echo
fi

if [ -f /usr/local/bin/apm ]; then
  header "Updating Atom..."
  /usr/local/bin/apm update -c=0
  echo
fi

if [ -f /usr/local/bin/composer ]; then
  header "Updating Composer..."
  /usr/local/bin/composer self-update
  /usr/local/bin/composer clear-cache
  echo
fi

if [ -f /usr/local/bin/brew ]; then
  header "Updating Homebrew..."
  /usr/local/bin/brew update
  /usr/local/bin/brew upgrade
  /usr/local/bin/brew cleanup
  /usr/local/bin/brew prune
  echo
fi

nyan -alt
